<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <title></title>
  <link href="css/style.css" rel="stylesheet">
  <meta content="" name="description">

  <meta content="" property="og:title">
  <meta content="" property="og:type">
  <meta content="" property="og:url">
  <meta content="" property="og:image">

  <link href="/favicon.ico" rel="icon" sizes="any">
  <link href="/icon.svg" rel="icon" type="image/svg+xml">
  <link href="icon.png" rel="apple-touch-icon">

  <link href="site.webmanifest" rel="manifest">
  <meta content="#fafafa" name="theme-color">
  <script>
    window.addEventListener('DOMContentLoaded', () =>
      window.IncogniaWebSdk.init('3048e4b7-5938-49d8-abeb-4bee270bdcca')
    )
  </script>
  <script>
    var isSandbox = true;
    var sardineHost = 'api.sandbox.sardine.ai'; //please set isSandbox to true in Sandbox
    (function () {
      var loader = document.createElement('script');
      loader.type = 'text/javascript';
      loader.async = true;
      loader.src = `https://${sardineHost}/assets/loader.min.js`;
      loader.onload = function () {
        sardineContext = window._Sardine.createContext({
          clientId: "479e58fd-4fc2-49bc-ad1c-0ce41cc9ab65", //CHANGE THIS
          sessionKey: 'Sesh403', // Please CHANGE this to  pass server side generated sessionKey and you will need this again for back-end  API call
          userIdHash: "6506506506", //CHANGE this to pass internal userId or hash of email/phone. Dont pass it if its not available.
          flow: "abcd",
          environment: "sandbox",
          parentElement: document.body,
          // called when sardine generates/restores deviceID for given device.
          onDeviceResponse: function (data) {
          }
        });
      };
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(loader, s);
    })();
  </script>
  <script type="text/javascript">
    (function (n, e, u, r, o, i, d) {
      n.nid = n.nid || function () {
        (n.nid.q = n.nid.q || []).push(arguments)
      };
      o = e.createElement(u);
      i = e.getElementsByTagName(u)[0];
      o.async = 1;
      o.src = r;
      i.parentNode.insertBefore(o, i);
    })(window, document, 'script', '//scripts.neuro-id.com/c/nid-hails661.js');
    //  nid('setRegisteredUserId’, ‘your_user_id' );
    nid('start');
    nid('identify', 'Sesh403');
  </script>

  <!-- Add your site or application content here -->
  <p>Hello world!</p>
  <script src="js/app.js"></script>
  <script src="js/klarna_toolkit.js"></script>
  <script defer src="https://repo.incognia.com/web/latest/incognia-web-sdk.js"></script>
  <script>
    // Initialize the agent on page load.
    const fpPromise = import('https://fpjscdn.net/v3/cLUP4yT1dAUJAO90UKgp')
      .then(FingerprintJS => FingerprintJS.load({
        region: "eu"
      }))

    // Get the visitorId when you need it.
    fpPromise
      .then(fp => fp.get())
      .then(result => {
        const visitorId = result.visitorId
        console.log(visitorId)
      })
  </script>
  <script>
    window.onload = function () {
      try {
        if (typeof klarna.profile === 'function') {
          //var y = 'sessiontest34'
          var x = klarna.profile('h.online-metrix.net', '87rxrdob', 'Sesh403');
          console.log(x);
          console.log('sessionid -  Sesh403');
        } else {
          console.log('klarna.profile is not defined');
        }
      } catch (err) {
        console.log('error: ' + err);
      }
    };
  </script>

</head>

<body>

<input id="phone_number" type="text">
<button id="myButton" onclick="callAPI()">Submit for TMX</button>
<button id="myButton2" onclick=nid('closeSession');>Submit for NeuroID</button>
<label id="session-token">Session Token: </label>
<button onclick="displaySessionToken()" id="bot">Session_token</button>
<p id="displayText">Your text will appear here</p>
<script>
  async function displaySessionToken() {
    const sessionToken = await IncogniaWebSdk.getSessionToken()
    document.getElementById("session-token").innerText = "Session Token: " + sessionToken;
  }
</script>
<noscript>
  <img
    src="https://api.sandbox.sardine.ai/v1/a.png?clientId=479e58fd-4fc2-49bc-ad1c-0ce41cc9ab65&sessionKey=sessionID234&flow=abcd&ns=1"
    style="display: none"/>
</noscript>
<script>
  function callAPI() {
    // Assuming you're sending the text as a query parameter to a GET endpoint
    var userInput = document.getElementById('phone_number').value;
    var apiURL = 'https://h-api-sb.online-metrix.net/api/session-query?org_id=87rxrdob&api_key=i4lqdshhsbmz0kww&session_id=Sesh403&service_type=session-policy&account_telephone=' + encodeURIComponent(userInput);

    fetch(apiURL)
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json(); // or .text() if the response is plain text
      })
      .then(data => {
        console.log(data); // Process your data here
        document.getElementById('displayText').innerText = JSON.stringify(data); // Example of displaying the response
      })
      .catch(error => {
        console.error('There has been a problem with your fetch operation:', error);
      });
    document.getElementById('displayText').innerText = userInput + apiURL;
  }
</script>

</body>

</html>
